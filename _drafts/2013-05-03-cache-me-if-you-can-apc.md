---
layout: default
title: 'Cache Me If You Can: APC'
created: 1367577577
---
<p>As some of you may have heard, we're planning a cache shootout BoF for PDX 2013. This will be an <strong>advanced</strong>, <strong>in-depth</strong>,&nbsp;<strong>serious Drupalist</strong> dive into the various caching backends available for Drupal, their relative strengths, and how to profile a site's needs for the optimal caching setup. In preparation, we're running benchmarks so that we can have&nbsp;<strong>lots of numbers</strong> to throw at you. And that means blog posts! One for each of the common caching systems.</p><h3>About APC</h3><p>Today's post is about <strong>APC</strong>, the Alternative PHP Cache. As far as an overview goes, Wikipedia explains it best:</p><p style="margin-left: 40px;">Alternative PHP Cache&nbsp;is a free,&nbsp;<a href="https://en.wikipedia.org/wiki/Open_source" title="Open source">open source</a>&nbsp;(<a href="https://en.wikipedia.org/wiki/PHP_license" title="PHP license">PHP license</a>) framework that heavily optimizes and tunes the output of the PHP bytecode compiler and stores the final, compiled result in&nbsp;<a href="https://en.wikipedia.org/wiki/Shared_memory" title="Shared memory">shared memory</a>. This bytecode optimization leads to faster runtime execution since the low-level instructions become more efficient. Its second, even more important job is maintaining a shared, in-memory bytecode cache which allows your server to re-use the compiled code rather than going through the extremely slow task of retrieving source files from disk and re-compiling them on every page load, thus giving you an even bigger performance boost. Compiled files remain in the shared cache and will only be re-compiled if the original source code files are updated. For a heavy application consisting of a large source code base such as&nbsp;<a href="https://en.wikipedia.org/wiki/Drupal" title="Drupal">Drupal</a>, you can expect around a 3x increase in page generation speed&nbsp;as a result.</p><p>A three times pageload speed improvement is pretty impressive. But the citation is a blog post from 5 years ago, running Drupal 6. We've seen a lot of development since then - do those numbers still add up?</p><h3>Methodology</h3><p>For all of our tests we'll use an AWS "Small" instance, with one CPU core and 1.7GB memory. We chose this configuration because it is realistic for many small hosting environments, and because when a particular caching method is particularly CPU- or memory-constrained, we want to know about it. We may demonstrate that this is the case by running a second "bonus" test on a larger instance size. We will use an out-of-the-box CentOS configuration of Apache, PHP5, and MySQL running on the same server together. In a previous post we covered a comparison of the common core and contrib cache bins, and what sort of data gets stored where, so for each backend we review we will try to recommend "best fits" for normal scenarios. We will also recommend strengths of each system with an eye to more particular requirements. At the end of the series, we will post a methodology for profiling a new site to build an ideal cache solution, tailored to that site.</p><p>&nbsp;</p>
